/*!CK:3329303946!*//*1448208433,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["5+c20"]); }

__d('HostnameRewriter',['URI','isFacebookURI','lowerFacebookDomain'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=function(aa){return String(aa).replace(/([.*+?^=!:${}()|[\]\/\\])/g,'\\$1');},l=null,m=null,n=new RegExp('^(.*(?:channel-proxy|edge-chat).*)\\.(facebook\\.com)$','i'),o=new RegExp('facebook\\.com$'),p=new RegExp('^www\\.(|.*\\.)facebook\\.com$'),q=null,r='facebook.com';function s(aa){l=null;var ba;if(aa){ba='(^|\\.)';}else ba='^';q=ba+k(r)+'$';m=null;}function t(){if(!q)return null;if(l)return l;l=new RegExp(q,'i');return l;}function u(){if(m)return m;m=new RegExp('(^|\\.)('+k(r)+'|facebook\\.com)$','i');return m;}function v(){return function(aa){aa=new h(aa);var ba=n.exec(aa.getDomain());if(!ba||ba.length<3)return aa;aa.setDomain('edge-chat.'+ba[2]);return aa;};}function w(){return function(aa){aa=new h(aa);if(u().test(aa.getDomain()))aa.setProtocol('https');return aa;};}function x(){return function(aa){aa=new h(aa);var ba=aa.getDomain();if(u().test(ba))aa.setDomain(ba.replace(o,r));return aa;};}function y(){return function(aa){aa=new h(aa);var ba=aa.getDomain();if(p.test(ba))aa.setDomain(r);return aa;};}var z={registerFacebookFilters:function(aa,ba){r=aa;s(ba);i.setRegex(t());h.registerFilter(v());h.registerFilter(w());h.registerFilter(x());j.setDomain(r);},registerInternetDotOrgFilters:function(aa,ba){r=aa;h.registerFilter(y());}};f.exports=z;},null);
__d('VertexScaledImageWithFallback',['CSS','DOMQuery'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();f.exports={handleFallback:function(j,k){var l=i.find(j,'img'),m=new Image(),n=(function(o){if(m.width<=1||m.height<=1){h.hide(j);h.show(k);}}).bind(this);m.onload=n;m.onerror=n;m.src=l.src;}};},null);